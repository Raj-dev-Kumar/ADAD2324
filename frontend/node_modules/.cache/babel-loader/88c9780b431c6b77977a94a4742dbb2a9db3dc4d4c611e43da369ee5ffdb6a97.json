{"ast":null,"code":"import { Logger } from './logger';\nexport const BLOCKSTACK_HANDLER = 'blockstack';\nexport function nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\nexport function nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\nexport function nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\nexport function megabytesToBytes(megabytes) {\n  if (!Number.isFinite(megabytes)) {\n    return 0;\n  }\n  return Math.floor(megabytes * 1024 * 1024);\n}\nexport function getAesCbcOutputLength(inputByteLength) {\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\nexport function getBase64OutputLength(inputByteLength) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\nexport function updateQueryStringParameter(uri, key, value) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`);\n  } else {\n    return `${uri}${separator}${key}=${value}`;\n  }\n}\nexport function isLaterVersion(v1, v2) {\n  if (v1 === undefined || v1 === '') {\n    v1 = '0.0.0';\n  }\n  if (v2 === undefined || v1 === '') {\n    v2 = '0.0.0';\n  }\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\nexport function makeUUID4() {\n  let d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now();\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : r & 0x3 | 0x8).toString(16);\n  });\n}\nexport function isSameOriginAbsoluteUrl(uri1, uri2) {\n  try {\n    const parsedUri1 = new URL(uri1);\n    const parsedUri2 = new URL(uri2);\n    const port1 = parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n    const port2 = parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute: (uri1.includes('http://') || uri1.includes('https://')) && (uri2.includes('http://') || uri2.includes('https://'))\n    };\n    return match.scheme && match.hostname && match.port && match.absolute;\n  } catch (error) {\n    console.log(error);\n    console.log('Parsing error in same URL origin check');\n    return false;\n  }\n}\nexport function getGlobalScope() {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available');\n}\nfunction getAPIUsageErrorMessage(scopeObject, apiName, usageDesc) {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  }\n}\nexport function getGlobalObject(name, {\n  throwIfUnavailable,\n  usageDesc,\n  returnEmptyObject\n} = {}) {\n  let globalScope = undefined;\n  try {\n    globalScope = getGlobalScope();\n    if (globalScope) {\n      const obj = globalScope[name];\n      if (obj) {\n        return obj;\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n    Logger.error(errMsg);\n    throw new Error(errMsg);\n  }\n  if (returnEmptyObject) {\n    return {};\n  }\n  return undefined;\n}\nexport function getGlobalObjects(names, {\n  throwIfUnavailable,\n  usageDesc,\n  returnEmptyObject\n} = {}) {\n  let globalScope;\n  try {\n    globalScope = getGlobalScope();\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`);\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n      Logger.error(errMsg);\n      throw errMsg;\n    } else if (returnEmptyObject) {\n      globalScope = {};\n    }\n  }\n  const result = {};\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    try {\n      if (globalScope) {\n        const obj = globalScope[name];\n        if (obj) {\n          result[name] = obj;\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n          Logger.error(errMsg);\n          throw new Error(errMsg);\n        } else if (returnEmptyObject) {\n          result[name] = {};\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n      }\n    }\n  }\n  return result;\n}\nexport function intToBytes(value, signed, byteLength) {\n  return bigIntToBytes(intToBigInt(value, signed), byteLength);\n}\nexport function intToBigInt(value, signed) {\n  let parsedValue = value;\n  if (typeof parsedValue === 'number') {\n    if (!Number.isInteger(parsedValue)) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n    }\n    if (parsedValue > Number.MAX_SAFE_INTEGER) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);\n    }\n    return BigInt(parsedValue);\n  }\n  if (typeof parsedValue === 'string') {\n    if (parsedValue.toLowerCase().startsWith('0x')) {\n      let hex = parsedValue.slice(2);\n      hex = hex.padStart(hex.length + hex.length % 2, '0');\n      parsedValue = hexToBytes(hex);\n    } else {\n      try {\n        return BigInt(parsedValue);\n      } catch (error) {\n        if (error instanceof SyntaxError) {\n          throw new RangeError(`Invalid value. String integer '${parsedValue}' is not finite.`);\n        }\n      }\n    }\n  }\n  if (typeof parsedValue === 'bigint') {\n    return parsedValue;\n  }\n  if (parsedValue instanceof Uint8Array) {\n    if (signed) {\n      const bn = fromTwos(BigInt(`0x${bytesToHex(parsedValue)}`), BigInt(parsedValue.byteLength * 8));\n      return BigInt(bn.toString());\n    } else {\n      return BigInt(`0x${bytesToHex(parsedValue)}`);\n    }\n  }\n  if (parsedValue != null && typeof parsedValue === 'object' && parsedValue.constructor.name === 'BN') {\n    return BigInt(parsedValue.toString());\n  }\n  throw new TypeError(`Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.`);\n}\nexport function with0x(value) {\n  return value.startsWith('0x') ? value : `0x${value}`;\n}\nexport function hexToBigInt(hex) {\n  if (typeof hex !== 'string') throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n  return BigInt(`0x${hex}`);\n}\nexport function intToHex(integer, lengthBytes = 8) {\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer, false);\n  return value.toString(16).padStart(lengthBytes * 2, '0');\n}\nexport function hexToInt(hex) {\n  return parseInt(hex, 16);\n}\nexport function bigIntToBytes(value, length = 16) {\n  const hex = intToHex(value, length);\n  return hexToBytes(hex);\n}\nexport function toTwos(value, width) {\n  if (value < -(BigInt(1) << width - BigInt(1)) || (BigInt(1) << width - BigInt(1)) - BigInt(1) < value) {\n    throw `Unable to represent integer in width: ${width}`;\n  }\n  if (value >= BigInt(0)) {\n    return BigInt(value);\n  }\n  return value + (BigInt(1) << width);\n}\nfunction nthBit(value, n) {\n  return value & BigInt(1) << n;\n}\nexport function fromTwos(value, width) {\n  if (nthBit(value, width - BigInt(1))) {\n    return value - (BigInt(1) << width);\n  }\n  return value;\n}\nconst hexes = Array.from({\n  length: 256\n}, (_, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(uint8a) {\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (const u of uint8a) {\n    hex += hexes[u];\n  }\n  return hex;\n}\nexport function hexToBytes(hex) {\n  if (typeof hex !== 'string') {\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n  }\n  const paddedHex = hex.length % 2 ? `0${hex}` : hex;\n  const array = new Uint8Array(paddedHex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = paddedHex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\nexport function utf8ToBytes(str) {\n  return new TextEncoder().encode(str);\n}\nexport function bytesToUtf8(arr) {\n  return new TextDecoder().decode(arr);\n}\nexport function asciiToBytes(str) {\n  const byteArray = [];\n  for (let i = 0; i < str.length; i++) {\n    byteArray.push(str.charCodeAt(i) & 0xff);\n  }\n  return new Uint8Array(byteArray);\n}\nexport function bytesToAscii(arr) {\n  return String.fromCharCode.apply(null, arr);\n}\nfunction isNotOctet(octet) {\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\nexport function octetsToBytes(numbers) {\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\n  return new Uint8Array(numbers);\n}\nexport function toBytes(data) {\n  if (typeof data === 'string') return utf8ToBytes(data);\n  if (data instanceof Uint8Array) return data;\n  throw new TypeError(`Expected input type is (Uint8Array | string) but got (${typeof data})`);\n}\nexport function concatBytes(...arrays) {\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\nexport function concatArray(elements) {\n  return concatBytes(...elements.map(e => {\n    if (typeof e === 'number') return octetsToBytes([e]);\n    if (e instanceof Array) return octetsToBytes(e);\n    return e;\n  }));\n}\nexport function isInstance(object, type) {\n  return object instanceof type || object?.constructor?.name?.toLowerCase() === type.name;\n}","map":{"version":3,"names":["Logger","BLOCKSTACK_HANDLER","nextYear","Date","setFullYear","getFullYear","nextMonth","setMonth","getMonth","nextHour","setHours","getHours","megabytesToBytes","megabytes","Number","isFinite","Math","floor","getAesCbcOutputLength","inputByteLength","cipherTextLength","getBase64OutputLength","encodedLength","ceil","updateQueryStringParameter","uri","key","value","re","RegExp","separator","indexOf","match","replace","isLaterVersion","v1","v2","undefined","v1tuple","split","map","x","parseInt","v2tuple","index","length","push","makeUUID4","d","getTime","performance","now","c","r","random","toString","isSameOriginAbsoluteUrl","uri1","uri2","parsedUri1","URL","parsedUri2","port1","port","protocol","port2","scheme","hostname","absolute","includes","error","console","log","getGlobalScope","self","window","global","Error","getAPIUsageErrorMessage","scopeObject","apiName","usageDesc","getGlobalObject","name","throwIfUnavailable","returnEmptyObject","globalScope","obj","errMsg","getGlobalObjects","names","result","i","intToBytes","signed","byteLength","bigIntToBytes","intToBigInt","parsedValue","isInteger","RangeError","MAX_SAFE_INTEGER","BigInt","toLowerCase","startsWith","hex","slice","padStart","hexToBytes","SyntaxError","Uint8Array","bn","fromTwos","bytesToHex","constructor","TypeError","with0x","hexToBigInt","intToHex","integer","lengthBytes","hexToInt","toTwos","width","nthBit","n","hexes","Array","from","_","uint8a","u","paddedHex","array","j","hexByte","byte","isNaN","utf8ToBytes","str","TextEncoder","encode","bytesToUtf8","arr","TextDecoder","decode","asciiToBytes","byteArray","charCodeAt","bytesToAscii","String","fromCharCode","apply","isNotOctet","octet","octetsToBytes","numbers","some","toBytes","data","concatBytes","arrays","every","a","reduce","pad","set","concatArray","elements","e","isInstance","object","type"],"sources":["C:\\Users\\Pedro\\ADAD2324\\frontend\\node_modules\\@stacks\\common\\src\\utils.ts"],"sourcesContent":["import { Logger } from './logger';\r\n\r\n/**\r\n *  @ignore\r\n */\r\nexport const BLOCKSTACK_HANDLER = 'blockstack';\r\n\r\n/**\r\n * Time\r\n * @private\r\n * @ignore\r\n */\r\nexport function nextYear() {\r\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\r\n}\r\n\r\n/**\r\n * Time\r\n * @private\r\n * @ignore\r\n */\r\nexport function nextMonth() {\r\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\r\n}\r\n\r\n/**\r\n * Time\r\n * @private\r\n * @ignore\r\n */\r\nexport function nextHour() {\r\n  return new Date(new Date().setHours(new Date().getHours() + 1));\r\n}\r\n\r\n/**\r\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\r\n * @ignore\r\n */\r\nexport function megabytesToBytes(megabytes: number): number {\r\n  if (!Number.isFinite(megabytes)) {\r\n    return 0;\r\n  }\r\n  return Math.floor(megabytes * 1024 * 1024);\r\n}\r\n\r\n/**\r\n * Calculate the AES-CBC ciphertext output byte length a given input length.\r\n * AES has a fixed block size of 16-bytes regardless key size.\r\n * @ignore\r\n */\r\nexport function getAesCbcOutputLength(inputByteLength: number) {\r\n  // AES-CBC block mode rounds up to the next block size.\r\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\r\n  return cipherTextLength;\r\n}\r\n\r\n/**\r\n * Calculate the base64 encoded string length for a given input length.\r\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\r\n * encoded.\r\n * @param number\r\n */\r\nexport function getBase64OutputLength(inputByteLength: number) {\r\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\r\n  return encodedLength;\r\n}\r\n\r\n/**\r\n * Query Strings\r\n * @private\r\n * @ignore\r\n */\r\n\r\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\r\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\r\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\r\n  if (uri.match(re)) {\r\n    return uri.replace(re, `$1${key}=${value}$2`);\r\n  } else {\r\n    return `${uri}${separator}${key}=${value}`;\r\n  }\r\n}\r\n\r\n/**\r\n * Versioning\r\n * @param {string} v1 - the left half of the version inequality\r\n * @param {string} v2 - right half of the version inequality\r\n * @returns {bool} iff v1 >= v2\r\n * @private\r\n * @ignore\r\n */\r\n\r\nexport function isLaterVersion(v1: string, v2: string) {\r\n  if (v1 === undefined || v1 === '') {\r\n    v1 = '0.0.0';\r\n  }\r\n\r\n  if (v2 === undefined || v1 === '') {\r\n    v2 = '0.0.0';\r\n  }\r\n\r\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\r\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\r\n\r\n  for (let index = 0; index < v2.length; index++) {\r\n    if (index >= v1.length) {\r\n      v2tuple.push(0);\r\n    }\r\n    if (v1tuple[index] < v2tuple[index]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n/**\r\n * UUIDs\r\n * @private\r\n * @ignore\r\n */\r\nexport function makeUUID4() {\r\n  let d = new Date().getTime();\r\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\r\n    d += performance.now(); // use high-precision timer if available\r\n  }\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n    const r = (d + Math.random() * 16) % 16 | 0;\r\n    d = Math.floor(d / 16);\r\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\r\n  });\r\n}\r\n\r\n/**\r\n * Checks if both urls pass the same origin check & are absolute\r\n * @param  {[type]}  uri1 first uri to check\r\n * @param  {[type]}  uri2 second uri to check\r\n * @return {Boolean} true if they pass the same origin check\r\n * @private\r\n * @ignore\r\n */\r\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\r\n  try {\r\n    const parsedUri1 = new URL(uri1);\r\n    const parsedUri2 = new URL(uri2);\r\n\r\n    const port1 =\r\n      parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\r\n    const port2 =\r\n      parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\r\n\r\n    const match = {\r\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\r\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\r\n      port: port1 === port2,\r\n      absolute:\r\n        (uri1.includes('http://') || uri1.includes('https://')) &&\r\n        (uri2.includes('http://') || uri2.includes('https://')),\r\n    };\r\n\r\n    return match.scheme && match.hostname && match.port && match.absolute;\r\n  } catch (error) {\r\n    console.log(error);\r\n    console.log('Parsing error in same URL origin check');\r\n    // Parse error\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the\r\n * currently executing environment.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\r\n *\r\n * This could be switched to `globalThis` once it is standardized and widely available.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\r\n * @ignore\r\n */\r\nexport function getGlobalScope(): Window {\r\n  if (typeof self !== 'undefined') {\r\n    return self;\r\n  }\r\n  if (typeof window !== 'undefined') {\r\n    return window;\r\n  }\r\n  // This function is meant to be called when accessing APIs that are typically only available in\r\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js\r\n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the\r\n  // `window` global object as well.\r\n  if (typeof global !== 'undefined') {\r\n    return global as unknown as Window;\r\n  }\r\n  throw new Error(\r\n    'Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available'\r\n  );\r\n}\r\n\r\nfunction getAPIUsageErrorMessage(\r\n  scopeObject: unknown,\r\n  apiName: string,\r\n  usageDesc?: string\r\n): string {\r\n  if (usageDesc) {\r\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\r\n  } else {\r\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\r\n  }\r\n}\r\n\r\ninterface GetGlobalObjectOptions {\r\n  /**\r\n   * Throw an error if the object is not found.\r\n   * @default false\r\n   */\r\n  throwIfUnavailable?: boolean;\r\n  /**\r\n   * Additional information to include in an error if thrown.\r\n   */\r\n  usageDesc?: string;\r\n  /**\r\n   * If the object is not found, return an new empty object instead of undefined.\r\n   * Requires [[throwIfUnavailable]] to be falsey.\r\n   * @default false\r\n   */\r\n  returnEmptyObject?: boolean;\r\n}\r\n\r\n/**\r\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it\r\n * is available within the currently executing environment.\r\n * When executing within the Node.js runtime these APIs are unavailable and will be\r\n * `undefined` unless the API is provided via polyfill.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\r\n * @ignore\r\n */\r\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\r\n  name: K,\r\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\r\n): Window[K] | undefined {\r\n  let globalScope: Window | undefined = undefined;\r\n  try {\r\n    globalScope = getGlobalScope();\r\n    if (globalScope) {\r\n      const obj = globalScope[name];\r\n      if (obj) {\r\n        return obj;\r\n      }\r\n    }\r\n  } catch (error) {\r\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\r\n  }\r\n  if (throwIfUnavailable) {\r\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\r\n    Logger.error(errMsg);\r\n    throw new Error(errMsg);\r\n  }\r\n  if (returnEmptyObject) {\r\n    return {} as any;\r\n  }\r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`)\r\n * if they are available within the currently executing environment.\r\n * When executing within the Node.js runtime these APIs are unavailable will be `undefined`\r\n * unless the API is provided via polyfill.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\r\n * @ignore\r\n */\r\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\r\n  names: K[],\r\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\r\n): Pick<Window, K> {\r\n  let globalScope: Window | undefined;\r\n  try {\r\n    globalScope = getGlobalScope();\r\n  } catch (error) {\r\n    Logger.error(`Error getting global scope: ${error}`);\r\n    if (throwIfUnavailable) {\r\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\r\n      Logger.error(errMsg);\r\n      throw errMsg;\r\n    } else if (returnEmptyObject) {\r\n      globalScope = {} as any;\r\n    }\r\n  }\r\n\r\n  const result: Pick<Window, K> = {} as any;\r\n  for (let i = 0; i < names.length; i++) {\r\n    const name = names[i];\r\n    try {\r\n      if (globalScope) {\r\n        const obj = globalScope[name];\r\n        if (obj) {\r\n          result[name] = obj;\r\n        } else if (throwIfUnavailable) {\r\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\r\n          Logger.error(errMsg);\r\n          throw new Error(errMsg);\r\n        } else if (returnEmptyObject) {\r\n          result[name] = {} as any;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      if (throwIfUnavailable) {\r\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\r\n        Logger.error(errMsg);\r\n        throw new Error(errMsg);\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n}\r\n// After removing bn.js library provide backward compatibility for users passing bn.js instance\r\ntype BN = import('bn.js'); // Type only import from @types/bn.js\r\nexport type IntegerType = number | string | bigint | Uint8Array | BN;\r\n\r\nexport function intToBytes(value: IntegerType, signed: boolean, byteLength: number): Uint8Array {\r\n  return bigIntToBytes(intToBigInt(value, signed), byteLength);\r\n}\r\n\r\nexport function intToBigInt(value: IntegerType, signed: boolean): bigint {\r\n  let parsedValue = value;\r\n\r\n  if (typeof parsedValue === 'number') {\r\n    if (!Number.isInteger(parsedValue)) {\r\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\r\n    }\r\n    if (parsedValue > Number.MAX_SAFE_INTEGER) {\r\n      throw new RangeError(\r\n        `Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`\r\n      );\r\n    }\r\n    return BigInt(parsedValue);\r\n  }\r\n  if (typeof parsedValue === 'string') {\r\n    // If hex string then convert to bytes then fall through to the bytes condition\r\n    if (parsedValue.toLowerCase().startsWith('0x')) {\r\n      // Trim '0x' hex-prefix\r\n      let hex = parsedValue.slice(2);\r\n\r\n      // Allow odd-length strings like `0xf` -- some libs output these, or even just `0x${num.toString(16)}`\r\n      hex = hex.padStart(hex.length + (hex.length % 2), '0');\r\n\r\n      parsedValue = hexToBytes(hex);\r\n    } else {\r\n      try {\r\n        return BigInt(parsedValue);\r\n      } catch (error) {\r\n        if (error instanceof SyntaxError) {\r\n          throw new RangeError(`Invalid value. String integer '${parsedValue}' is not finite.`);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  if (typeof parsedValue === 'bigint') {\r\n    return parsedValue;\r\n  }\r\n  if (parsedValue instanceof Uint8Array) {\r\n    if (signed) {\r\n      // Allow byte arrays smaller than 128-bits to be passed.\r\n      // This allows positive signed ints like `0x08` (8) or negative signed\r\n      // ints like `0xf8` (-8) to be passed without having to pad to 16 bytes.\r\n      const bn = fromTwos(\r\n        BigInt(`0x${bytesToHex(parsedValue)}`),\r\n        BigInt(parsedValue.byteLength * 8)\r\n      );\r\n      return BigInt(bn.toString());\r\n    } else {\r\n      return BigInt(`0x${bytesToHex(parsedValue)}`);\r\n    }\r\n  }\r\n  // After removing bn.js library provide backward compatibility for users passing bn.js instance\r\n  // For backward compatibility with bn.js check if it's a bn.js instance\r\n  if (\r\n    parsedValue != null &&\r\n    typeof parsedValue === 'object' &&\r\n    parsedValue.constructor.name === 'BN'\r\n  ) {\r\n    return BigInt(parsedValue.toString());\r\n  }\r\n  throw new TypeError(\r\n    `Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.`\r\n  );\r\n}\r\n\r\nexport function with0x(value: string): string {\r\n  return value.startsWith('0x') ? value : `0x${value}`;\r\n}\r\n\r\n/**\r\n * Converts hex input string to bigint\r\n * @param hex - hex input string without 0x prefix and in big endian format\r\n * @example \"6c7cde4d702830c1db34ef7c19e2776f59107afef39084776fc88bc78dbb9656\"\r\n * @ignore\r\n */\r\nexport function hexToBigInt(hex: string): bigint {\r\n  if (typeof hex !== 'string')\r\n    throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\r\n  // Big Endian\r\n  return BigInt(`0x${hex}`);\r\n}\r\n\r\n/**\r\n * Converts IntegerType to hex string\r\n * @ignore\r\n */\r\nexport function intToHex(integer: IntegerType, lengthBytes = 8): string {\r\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer, false);\r\n  return value.toString(16).padStart(lengthBytes * 2, '0');\r\n}\r\n\r\n/**\r\n * Converts hex string to integer\r\n * @ignore\r\n */\r\nexport function hexToInt(hex: string): number {\r\n  return parseInt(hex, 16);\r\n}\r\n\r\n/**\r\n * Converts bigint to byte array\r\n * @param value bigint value to be converted\r\n * @param length byte array optional length\r\n * @return {Uint8Array} byte array\r\n */\r\nexport function bigIntToBytes(value: bigint, length: number = 16): Uint8Array {\r\n  const hex = intToHex(value, length);\r\n  return hexToBytes(hex);\r\n}\r\n\r\n/**\r\n * Converts from signed number to two's complement\r\n * MIN_VALUE = -(1 << (width - 1))\r\n * MAX_VALUE =  (1 << (width - 1)) - 1\r\n * @ignore\r\n */\r\nexport function toTwos(value: bigint, width: bigint): bigint {\r\n  if (\r\n    value < -(BigInt(1) << (width - BigInt(1))) ||\r\n    (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value\r\n  ) {\r\n    throw `Unable to represent integer in width: ${width}`;\r\n  }\r\n  if (value >= BigInt(0)) {\r\n    return BigInt(value);\r\n  }\r\n  return value + (BigInt(1) << width);\r\n}\r\n\r\n/**\r\n * Returns nth bit (right-to-left, zero-indexed)\r\n */\r\nfunction nthBit(value: bigint, n: bigint) {\r\n  return value & (BigInt(1) << n);\r\n}\r\n\r\n/**\r\n * Converts from two's complement to signed number\r\n * @ignore\r\n */\r\nexport function fromTwos(value: bigint, width: bigint) {\r\n  if (nthBit(value, width - BigInt(1))) {\r\n    return value - (BigInt(1) << width);\r\n  }\r\n  return value;\r\n}\r\n\r\n// The following methods are based on `@noble/hashes` implementation\r\n// https://github.com/paulmillr/noble-hashes\r\n// Copyright (c) 2022 Paul Miller (https://paulmillr.com)\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the “Software”), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\r\n\r\n/**\r\n * Converts bytes to the equivalent hex string\r\n * @example\r\n * ```\r\n * bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\r\n * ```\r\n */\r\nexport function bytesToHex(uint8a: Uint8Array): string {\r\n  // pre-caching improves the speed 6x\r\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\r\n  let hex = '';\r\n  for (const u of uint8a) {\r\n    hex += hexes[u];\r\n  }\r\n  return hex;\r\n}\r\n\r\n/**\r\n * Converts a hex string to the equivalent bytes\r\n * @example\r\n * ```\r\n * hexToBytes('deadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\r\n * ```\r\n */\r\nexport function hexToBytes(hex: string): Uint8Array {\r\n  if (typeof hex !== 'string') {\r\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\r\n  }\r\n  const paddedHex = hex.length % 2 ? `0${hex}` : hex; // left pad with a zero if odd length\r\n  const array = new Uint8Array(paddedHex.length / 2);\r\n  for (let i = 0; i < array.length; i++) {\r\n    const j = i * 2;\r\n    const hexByte = paddedHex.slice(j, j + 2);\r\n    const byte = Number.parseInt(hexByte, 16);\r\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\r\n    array[i] = byte;\r\n  }\r\n  return array;\r\n}\r\n\r\ndeclare const TextEncoder: any;\r\ndeclare const TextDecoder: any;\r\n\r\n/**\r\n * Converts a UTF-8 string to the equivalent bytes\r\n * @example\r\n * ```\r\n * utf8ToBytes('stacks Ӿ'); // Uint8Array(9) [ 115, 116, 97, 99, 107, 115, 32, 211, 190 ];\r\n * ```\r\n */\r\nexport function utf8ToBytes(str: string): Uint8Array {\r\n  return new TextEncoder().encode(str);\r\n}\r\n\r\n/**\r\n * Converts bytes to the equivalent UTF-8 string\r\n * @example\r\n * ```\r\n * bytesToUtf8(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 211, 190])); // 'stacks Ӿ'\r\n * ```\r\n */\r\nexport function bytesToUtf8(arr: Uint8Array): string {\r\n  return new TextDecoder().decode(arr);\r\n}\r\n\r\n/**\r\n * Converts an ASCII string to the equivalent bytes\r\n * @example\r\n * ```\r\n * asciiToBytes('stacks $'); // Uint8Array(8) [ 115, 116, 97, 99, 107, 115, 32, 36 ]\r\n * ```\r\n */\r\nexport function asciiToBytes(str: string) {\r\n  const byteArray = [];\r\n  for (let i = 0; i < str.length; i++) {\r\n    byteArray.push(str.charCodeAt(i) & 0xff); // ignore second bytes of UTF-16 character\r\n  }\r\n  return new Uint8Array(byteArray);\r\n}\r\n\r\n/**\r\n * Converts bytes to the equivalent ASCII string\r\n * @example\r\n * ```\r\n * bytesToAscii(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 36])); // 'stacks $'\r\n * ```\r\n */\r\nexport function bytesToAscii(arr: Uint8Array) {\r\n  return String.fromCharCode.apply(null, arr as any as number[]);\r\n}\r\n\r\nfunction isNotOctet(octet: number) {\r\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\r\n}\r\n\r\n/** @ignore */\r\nexport function octetsToBytes(numbers: number[]) {\r\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\r\n  return new Uint8Array(numbers);\r\n}\r\n\r\n/** @ignore */\r\nexport function toBytes(data: Uint8Array | string): Uint8Array {\r\n  if (typeof data === 'string') return utf8ToBytes(data);\r\n  if (data instanceof Uint8Array) return data;\r\n  throw new TypeError(`Expected input type is (Uint8Array | string) but got (${typeof data})`);\r\n}\r\n\r\n/**\r\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\r\n * @example concatBytes(buf1, buf2)\r\n * @ignore\r\n */\r\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\r\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\r\n  if (arrays.length === 1) return arrays[0];\r\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\r\n  const result = new Uint8Array(length);\r\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\r\n    const arr = arrays[i];\r\n    result.set(arr, pad);\r\n    pad += arr.length;\r\n  }\r\n  return result;\r\n}\r\n\r\n/** @ignore */\r\nexport function concatArray(elements: (Uint8Array | number[] | number)[]) {\r\n  return concatBytes(\r\n    ...elements.map(e => {\r\n      if (typeof e === 'number') return octetsToBytes([e]);\r\n      if (e instanceof Array) return octetsToBytes(e);\r\n      return e;\r\n    })\r\n  );\r\n}\r\n\r\n/**\r\n * Better `instanceof` check for types in different environments\r\n * @ignore\r\n */\r\nexport function isInstance(object: any, type: any) {\r\n  return object instanceof type || object?.constructor?.name?.toLowerCase() === type.name;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}